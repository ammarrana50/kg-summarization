<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->

    <link href="includes/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Sigma Imports -->

    <script src="includes/sigma/sigma.core.js"></script>
    <script src="includes/sigma/conrad.js"></script>
    <script src="includes/sigma/utils/sigma.utils.js"></script>
    <script src="includes/sigma/utils/sigma.polyfills.js"></script>
    <script src="includes/sigma/sigma.settings.js"></script>
    <script src="includes/sigma/classes/sigma.classes.dispatcher.js"></script>
    <script src="includes/sigma/classes/sigma.classes.configurable.js"></script>
    <script src="includes/sigma/classes/sigma.classes.graph.js"></script>
    <script src="includes/sigma/classes/sigma.classes.camera.js"></script>
    <script src="includes/sigma/classes/sigma.classes.quad.js"></script>
    <script src="includes/sigma/classes/sigma.classes.edgequad.js"></script>
    <script src="includes/sigma/captors/sigma.captors.mouse.js"></script>
    <script src="includes/sigma/captors/sigma.captors.touch.js"></script>
    <script src="includes/sigma/renderers/sigma.renderers.canvas.js"></script>
    <script src="includes/sigma/renderers/sigma.renderers.webgl.js"></script>
    <script src="includes/sigma/renderers/sigma.renderers.svg.js"></script>
    <script src="includes/sigma/renderers/sigma.renderers.def.js"></script>
    <script src="includes/sigma/renderers/webgl/sigma.webgl.nodes.def.js"></script>
    <script src="includes/sigma/renderers/webgl/sigma.webgl.nodes.fast.js"></script>
    <script src="includes/sigma/renderers/webgl/sigma.webgl.edges.def.js"></script>
    <script src="includes/sigma/renderers/webgl/sigma.webgl.edges.fast.js"></script>
    <script src="includes/sigma/renderers/webgl/sigma.webgl.edges.arrow.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.labels.def.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.hovers.def.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.nodes.def.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edges.def.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edges.curve.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edges.arrow.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edgehovers.def.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edgehovers.curve.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edgehovers.arrow.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
    <script src="includes/sigma/renderers/canvas/sigma.canvas.extremities.def.js"></script>
    <script src="includes/sigma/renderers/svg/sigma.svg.utils.js"></script>
    <script src="includes/sigma/renderers/svg/sigma.svg.nodes.def.js"></script>
    <script src="includes/sigma/renderers/svg/sigma.svg.edges.def.js"></script>
    <script src="includes/sigma/renderers/svg/sigma.svg.edges.curve.js"></script>
    <script src="includes/sigma/renderers/svg/sigma.svg.labels.def.js"></script>
    <script src="includes/sigma/renderers/svg/sigma.svg.hovers.def.js"></script>
    <script src="includes/sigma/middlewares/sigma.middlewares.rescale.js"></script>
    <script src="includes/sigma/middlewares/sigma.middlewares.copy.js"></script>
    <script src="includes/sigma/misc/sigma.misc.animation.js"></script>
    <script src="includes/sigma/misc/sigma.misc.bindEvents.js"></script>
    <script src="includes/sigma/misc/sigma.misc.bindDOMEvents.js"></script>
    <script src="includes/sigma/misc/sigma.misc.drawHovers.js"></script>

    <!-- sigma plugins -->
    <script src="includes/sigma/plugins/sigma.plugins.dragNodes/sigma.plugins.dragNodes.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.parallelEdges/utils.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.parallelEdges/sigma.canvas.edges.curve.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.parallelEdges/sigma.canvas.edges.curvedArrow.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.parallelEdges/sigma.canvas.edgehovers.curve.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.parallelEdges/sigma.canvas.edgehovers.curvedArrow.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.edgeLabels/settings.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.def.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.curve.js"></script>
    <script src="includes/sigma/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.curvedArrow.js"></script>

    <style>
        #graph-container {
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        position: absolute;
        }
    </style>

    <title>Knowledge Graph | Results</title>
  </head>
  <body>
    <div class="container-fluid">
      <div id="graph-container"></div>
    </div>

    <script src="includes/jquery/jquery.min.js"></script>
    <script src="includes/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script>
      $(document).ready(function() {

        var i,s,
        N = 10,
        E = 50,
        g = {
        nodes: [],
        edges: []
        };

        var uriParts;
        var subNode, objNode, relType;
        i = 0;
        $.getJSON("output.json", function(data) {
          $.each(data, function(subject, typeList) {
            
            uriParts = subject.split('/');
            // inserting subject nodes
            subNode = {
                    id: 'n' + (++i),
                    label: uriParts[uriParts.length-1],
                    uri: subject,
                    x: Math.random(),
                    y: Math.random(),
                    size: 160,
                    color: "#"+((1<<24)*Math.random()|0).toString(16)
                };
            g.nodes.push(subNode);
            $.each(typeList, function(type, objectList) {
              relType = type.split('/');
              $.each(objectList, function(index, object) {
                
                // inserting object nodes and their edges
                
                
                uriParts = object.value.split('/');
                // inserting subject nodes
                objNode = {
                        id: 'n' + (++i),
                        label: uriParts[uriParts.length-1],
                        uri: object.value,
                        x: Math.random(),
                        y: Math.random(),
                        size: 80,
                        color: "#"+((1<<24)*Math.random()|0).toString(16)
                    };
                g.nodes.push(objNode);

                g.edges.push({
                    id: 'e_' + objNode.id,
                    label: relType[relType.length-1],
                    relType: type,
                    source: subNode.id,
                    target: objNode.id,
                    size: 1,
                    color: '#ccc'
                });
              });
            });
          });
        // Instantiate sigma:
        sigmaObj = new sigma({
          graph: g,
          renderer: {
            container: document.getElementById('graph-container'),
            type: 'canvas'
          },
        settings: {
          doubleClickEnabled: false,
          minEdgeSize: 0.5,
          maxEdgeSize: 1,
          enableEdgeHovering: true,
          edgeHoverColor: 'edge',
          defaultEdgeHoverColor: '#000',
          edgeHoverSizeRatio: 1,
          edgeHoverExtremities: true,
        }
        });

        // Initialize the dragNodes plugin:
        var dragListener = sigma.plugins.dragNodes(sigmaObj, sigmaObj.renderers[0]);

        

        // Bind the events:
        sigmaObj.bind('overNode outNode clickNode doubleClickNode rightClickNode', function(e) {
          console.log(e.type, e.data.node.label, e.data.captor);
        });
        sigmaObj.bind('overEdge outEdge clickEdge doubleClickEdge rightClickEdge', function(e) {
          console.log(e.type, e.data.edge, e.data.captor);
        });
        sigmaObj.bind('clickStage', function(e) {
          console.log(e.type, e.data.captor);
        });
        sigmaObj.bind('doubleClickStage rightClickStage', function(e) {
          console.log(e.type, e.data.captor);
        });

        });
      });
    </script>
  </body>
</html>
