<!DOCTYPE html>
<html lang="en">
<head>
	<title>Knowledge Graph</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="apple-touch-icon" sizes="180x180" href="includes/images/icons/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="includes/images/icons/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="includes/images/icons/favicon/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">
<!--===============================================================================================-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="includes/vendor/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="includes/vendor/fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="includes/css/util.css">
	<link rel="stylesheet" type="text/css" href="includes/css/main.css">
<!--===============================================================================================-->
</head>
<body style="background-image: url('includes/images/kg_bg.png'); background-size: cover;">
	
	<div class="limiter">
		<div class="container-login100">

			<div class="content">
					
					<span class="login100-form-title p-b-49">
						Knowledge Graph
					</span>
					<span class="login100-form-subtitle">
						Summarization
					</span>
				<!-- Nav pills -->
				<ul class="nav nav-pills" role="tablist">
				  <li class="nav-item">
					<a class="nav-link active" data-toggle="pill" href="#login">LinkSUM</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" data-toggle="pill" href="#regis">SALSA</a>
				  </li>
				</ul>
				<!-- Tab panes -->
				<div class="tab-content">
				  <div id="login" class="container tab-pane active">
					<form id="linksum_form">
						<div class="form-group">
						  <label for="search_entity">Entity</label>
						  <input type="text" class="form-control" required id="search_entity" placeholder="">
						  <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
						</div>
						
	
					  <div class="form-group">
						<label for="predicate_mode">Predicate Mode</label>						
						<select style="border:none;" class="form-control" name="predicate_mode" id="predicate_mode" required>
							<option value="DSC">DSC</option>
							<option value="EXC">EXC</option>
							<option value="FRQ ">FRQ</option>
						</select>
					  </div>

					  
					  <div class="form-group">
						<label for="max_enteries">Max Enteries</label>
						<input type="number" min="1" required class="form-control" id="max_enteries">
						<!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
					  </div>
					  <br>
					  
					  <button type="submit" id="btn_search" class="btn btn-primary">Search</button>
					</form>
				  </div>
				  <div id="regis" class="container tab-pane fade">
					<form id="salsa_form">
					  <div class="form-group">
						<label for="salsa_input">File Upload</label>
						<input type="file" name="file" id="salsa_input">
						<!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
					  </div>
					  <br>
					  
					  <button type="submit" class="btn btn-primary">Submit</button>
					</form>
				  </div>
				</div>
			</div>


			<!-- <div class="wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54">
				<span class="login100-form-title p-b-49">
					Knowledge Graph
				</span>
				<span class="login100-form-subtitle">
					Summarization
				</span> -->

				<!-- =============================================================== -->



					<!-- <form id="search_form" class="login100-form validate-form">
	
						<div class="wrap-input100 validate-input" data-validate="Entity is required">
							<span class="label-input100">Entity</span>
							<input class="input100" type="text" name="search_entity" id="search_entity" required placeholder="">
						</div>
	
						<div class="wrap-input100 validate-input m-b-23" data-validate = "Username is reauired">
							<span class="label-input100">Predicate Mode</span>						
							<select style="border:none;" class="input100" name="predicate_mode" id="predicate_mode" required>
								<option value="DSC">DSC</option>
								<option value="EXC">EXC</option>
								<option value="FRQ ">FRQ</option>
							  </select>
						</div>
	
						<div class="wrap-input100 validate-input" data-validate="It is required">
							<span class="label-input100">Max Enteries</span>
							<input class="input100" type="number" value="5" name="max_enteries" id="max_enteries" required  min="1" step="1" placeholder="">
						</div>
	
						<div style="display: none;visibility:hidden;" class="wrap-input100 validate-input m-b-23" data-validate = "Username is reauired">
							<span class="label-input100">Type</span>
							<input style="color: grey !important;" class="input100" type="text" name="type" id="type" value="Simple" disabled>
						</div>
						
						<div class="container-login100-form-btn">
								<button type="submit" id="btn_search" class="login100-form-btn">
									Search
								</button>
						</div>
					</form> -->
				
		</div>
	</div>
					
				<!-- =============================================================== -->

	<div id="overlay">
		<div class="cv-spinner">
			<span class="spinner"></span>
		</div>
	</div>
	
<!--===============================================================================================-->
	<script>
		$(document).ready(function() {

			$(document).ajaxSend(function() {
				$("#overlay").fadeIn(300);ã€€
			});

			$( "#linksum_form" ).submit(function( event ) {
  				event.preventDefault();
				var entitySearch = $("#search_entity").val();
				var predicateMode = $("#predicate_mode").val();
				var maxEnteries = $("#max_enteries").val();
				// var type = $("#type").val();
				var type = "entity";
				var url =
					"http://localhost:8080/kg/kgraph/type/" +
					type +
					"/name/" +
					entitySearch  +
					"/top/" +
					maxEnteries  +
					"/predicatemode/" +
					predicateMode;

				$.ajax({
					url: url,
					dataType: "json",
					type: "GET",
					success: function(data) {
						if (data.status) {
							window.open("/results.html");
						} else if(data.status == false) {
							if(data.msg != "") {
								alert(data.msg);
							}
						}
					},
					error: function (e) {

						// $("#result").text(e.responseText);
						console.log("ERROR : ", e);
						// $("#btnSubmit").prop("disabled", false);

					}, 
					complete: function(data) {
						
						setTimeout(function(){
							$("#overlay").fadeOut(300);
						},500);
					}
				});
			});


			$( "#salsa_form" ).submit(function( event ) {
  				event.preventDefault();
				
				// var form = $('#salsa_form')[0];

				// var data = new FormData(form);

				var url = "http://localhost:8080/kg/kgraphsalsa";

				// $("#btnSubmit").prop("disabled", true);

				$.ajax({
					url: url,
					type: "POST",
					data: new FormData(this),
					enctype: 'multipart/form-data',
					processData: false,
					contentType: false,
					cache: false,
					success: function (data) {

						alert(data);

						// $("#result").text(data);
						// console.log("SUCCESS : ", data);
						// $("#btnSubmit").prop("disabled", false);

					},
					error: function (e) {

						// $("#result").text(e.responseText);
						console.log("ERROR : ", e);
						// $("#btnSubmit").prop("disabled", false);

					}, 
					complete: function(data) {
						setTimeout(function(){
							$("#overlay").fadeOut(300);
						},500);
					}
				});












  				// var fd = new FormData();
  				// var files = $('#salsa_input')[0].files[0];
  				// fd.append('file',files);

				// // var type = $("#type").val();
				// var type = "entity";
				// var url = "http://localhost:8080/kg/kgraphsalsa";
				// $.ajax({
				// 	url: url,
				// 	type: 'post',
				// 	data: fd,
				// 	contentType: false,
				// 	processData: false,
				// 	success: function(response){
				// 		console.log(response);
				// 		setTimeout(function(){
				// 			$("#overlay").fadeOut(300);
				// 		},500);
				// 		// if(response != 0){
				// 		// 	$("#img").attr("src",response); 
				// 		// 	$(".preview img").show(); // Display image element
				// 		// }else{
				// 		// 	alert('file not uploaded');
				// 		// }
				// 	},
				// });

				// $.ajax({
				// 	url: url,
				// 	dataType: "JSONP",
				// 	jsonpCallback: "callback",
				// 	type: "GET",
				// 	success: function(data) {
				// 		if (data.status) {
				// 			window.open("/results.html");
				// 		} else if(data.status == false) {
				// 			if(data.msg != "") {
				// 				alert(data.msg);
				// 			}
				// 		}
				// 		setTimeout(function(){
				// 			$("#overlay").fadeOut(300);
				// 		},500);
				// 	}
				// });
			});
		});
	</script>

</body>
</html>